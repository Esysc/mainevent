"use strict";var clientsiiide=function(e){var g={};var d=function(){return Math.round(Date.now()/1000)};var f=function(i,j){return Object.prototype.toString.call(j)==="[object "+i+"]"};var c=function(i){return undefined!==i};var a=function(i){return f("Array",i)?i:[i]};var b=function(j,i){return e+":"+j+":"+i};var h=function(j,i){return b(j,i)+":expire"};g.getHitMissData=function(i){if(!c(i.ns)||!f("String",i.ns)){throw new Error("requires ns")}if(!c(i.keys)||(!f("String",i.keys)&&!f("Array",i.keys))){throw new Error("requires keys")}var j={hits:{},misses:[]};a(i.keys).forEach(function(l){var n=localStorage[b(i.ns,l)];if(!c(n)||null===n){j.misses.push(l)}else{var k=localStorage[h(i.ns,l)];if(!c(k)||null===k){if(i.expires){j.misses.push(l)}else{j.hits[l]=JSON.parse(n)}}else{var m=k-d();if(m<0){j.misses.push(l)}else{if(i.expires&&m>i.expires){j.misses.push(l)}else{j.hits[l]=JSON.parse(n)}}}}});return j};g.syncGet=function(i){return g.getHitMissData(i).hits};g.syncSet=function(i){if(!c(i.ns)||!f("String",i.ns)){throw new Error("requires ns")}Object.keys(i.data).forEach(function(j){if(i.expires){localStorage[h(i.ns,j)]=d()+i.expires}localStorage[b(i.ns,j)]=JSON.stringify(i.data[j])})};g.get=function(i){if(!c(i.onDone)||!f("Function",i.onDone)){throw new Error("requires onDone callback")}if(!c(i.onMiss)||!f("Function",i.onMiss)){throw new Error("requires onMiss callback")}var j=g.getHitMissData(i);if(!j.misses.length){i.onDone(j.hits);return}i.onMiss(j.misses,function(k){Object.keys(k).forEach(function(l){if(i.expires){localStorage[h(i.ns,l)]=d()+i.expires}localStorage[b(i.ns,l)]=JSON.stringify(k[l]);j.hits[l]=k[l]});i.onDone(j.hits)})};return g};